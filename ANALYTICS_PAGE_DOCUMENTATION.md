
# Документация страницы "Аналитика контакт-центра"

## 1. О текущем прототипе

### Стек технологий

**Основные технологии:**
- **React 18.3.1** с TypeScript - основной фреймворк для UI
- **Vite** - сборщик и dev-сервер
- **Tailwind CSS** - система стилизации
- **Shadcn UI** - библиотека компонентов
- **React Router Dom 6.26.2** - маршрутизация

**Библиотеки для графиков:**
- **Recharts 2.12.7** - основная библиотека для создания графиков и диаграмм
- Кастомные компоненты-обертки в `src/components/ui/charts.tsx`

**Дополнительные инструменты:**
- **Lucide React** - иконки
- **@tanstack/react-query** - управление состоянием и кэширование данных
- **Date-fns** - работа с датами

### Структура данных для аналитики

**Основные интерфейсы (src/types/contactCenter.ts):**

```typescript
interface AnalyticsData {
  periodStart: Date;
  periodEnd: Date;
  totalChats: number;
  avgChatDuration: number;
  satisfactionScore: number;
  responseTime: number;
}

interface AgentStats {
  agentId: string;
  name: string;
  handledChats: number;
  avgResponseTime: number;
  satisfaction: number;
}

interface ChannelDistribution {
  channel: string;
  percentage: number;
}
```

**Текущие компоненты аналитики:**
- `src/components/ContactCenter/AnalyticsDashboard.tsx` - основной компонент (300+ строк)
- `src/pages/ContactCenter/AnalyticsPage.tsx` - страница для физических лиц
- `src/pages/legal-entities/ContactCenter/LegalEntitiesAnalyticsPage.tsx` - страница для юридических лиц

## 2. О функциональности графиков

### Текущие метрики

**Основные KPI:**
- Общее количество диалогов
- Среднее время ответа (секунды)
- Количество активных операторов
- Оценка удовлетворенности (из 5.0)

**Динамические показатели:**
- Количество обращений по периодам
- Время ответа по месяцам
- Распределение по каналам связи
- Эффективность операторов

### Интерактивные элементы

**Реализованные:**
- Вкладки периодов (Неделя, Месяц, Квартал, Год)
- Tooltips с подробной информацией
- Адаптивные графики (ResponsiveContainer)
- Легенды и подписи осей

**Планируемые:**
- Фильтры по датам
- Экспорт данных в CSV/Excel
- Drill-down функциональность
- Настройка отображаемых метрик

### Типы графиков

**Линейные графики (LineChart):**
- Динамика обращений
- Тренды времени ответа
- Изменение удовлетворенности

**Столбчатые диаграммы (BarChart):**
- Эффективность операторов
- Сравнение показателей по периодам
- Топ тем обращений

**Круговые диаграммы (PieChart):**
- Распределение по каналам связи
- Сегментация клиентов
- Распределение типов обращений

## 3. О дизайне и UX

### Дизайн-система

**Цветовая схема ЛОГАЗ:**
- `#3B55A2` (logaz-blue) - основной цвет для графиков
- `#FB8607` (logaz-orange) - акцентный цвет
- `#4CAF50` (logaz-green) - позитивные метрики
- `#F44336` (logaz-red) - негативные показатели
- `#9C27B0` (purple) - дополнительный цвет

**UI Kit компоненты:**
- `StatsCard` - карточки с метриками
- `BaseChart` - базовый компонент для графиков
- Shadcn UI Cards, Tabs, Tooltips
- Кастомные цвета в Tailwind конфигурации

### Адаптивность

**Responsive дизайн:**
- Grid layout с адаптивными колонками
- `grid-cols-1 md:grid-cols-2 lg:grid-cols-4`
- ResponsiveContainer для всех графиков
- Мобильная оптимизация компонентов

**Breakpoints:**
- Mobile: до 768px
- Tablet: 768px - 1024px
- Desktop: 1024px+

### Уровень сложности интерфейса

**Текущий уровень: Средний**
- Интуитивная навигация через вкладки
- Tooltips для объяснения метрик
- Четкая визуальная иерархия
- Цветовое кодирование трендов

**Принципы UX:**
- Прогрессивное раскрытие информации
- Минимизация когнитивной нагрузки
- Быстрый доступ к ключевым метрикам
- Consistency с общим дизайном платформы

## 4. Рекомендации по развитию

### Краткосрочные улучшения (1-2 месяца)

1. **Фильтрация и поиск:**
   - Календарь для выбора произвольного периода
   - Фильтры по операторам и каналам
   - Поиск по конкретным диалогам

2. **Экспорт данных:**
   - CSV/Excel экспорт графиков
   - PDF отчеты
   - Scheduled reports

### Среднесрочные задачи (3-6 месяцев)

1. **Real-time аналитика:**
   - Live обновление метрик
   - WebSocket подключение
   - Push уведомления о критических показателях

2. **Расширенная аналитика:**
   - Cohort анализ
   - Funnel анализ конверсии
   - Predictive analytics

### Долгосрочная стратегия (6+ месяцев)

1. **AI-powered insights:**
   - Автоматическое выявление аномалий
   - Рекомендации по оптимизации
   - Прогнозирование нагрузки

2. **Кастомизация:**
   - Персональные дашборды
   - Настраиваемые алерты
   - Белые label решения

## 5. Техническая архитектура

### Файловая структура

```
src/
├── components/
│   ├── ContactCenter/
│   │   └── AnalyticsDashboard.tsx (РЕФАКТОРИНГ НУЖЕН)
│   ├── UI/
│   │   ├── StatsCard.tsx
│   │   └── charts.tsx (кастомные компоненты)
│   └── Dashboard/
│       └── charts/ (оптимизированные компоненты)
├── pages/
│   ├── ContactCenter/
│   │   └── AnalyticsPage.tsx
│   └── legal-entities/ContactCenter/
│       └── LegalEntitiesAnalyticsPage.tsx
├── types/
│   └── contactCenter.ts
└── hooks/
    └── useDashboardData.ts
```

### Производительность

**Текущие оптимизации:**
- React.memo для предотвращения ререндеров
- useMemo для тяжелых вычислений
- Lazy loading компонентов
- Оптимизированные Recharts компоненты

**Планируемые улучшения:**
- Виртуализация больших таблиц
- Пагинация данных
- Кэширование API запросов через React Query

---

*Последнее обновление: Май 2025*
*Версия документации: 1.0*
